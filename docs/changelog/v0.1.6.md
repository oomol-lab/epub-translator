# Release v0.1.6

This release introduces concurrent translation support and XML element weight optimization for improved translation performance and quality.

## ‚ú® New Features

### Concurrent Translation Support (#112)

Added `concurrency` parameter to the `translate()` function, enabling parallel processing of multiple text segments for significantly faster translation of large EPUB files.

```python
translate(
    source_path="source.epub",
    target_path="translated.epub",
    target_language="English",
    submit=SubmitKind.APPEND_BLOCK,
    llm=llm,
    concurrency=4,  # Process 4 segments concurrently
)
```

**Performance Tips:**
- Start with `concurrency=4` and adjust based on your API rate limits
- Higher concurrency can significantly reduce translation time for large books
- Monitor your API provider's rate limits to avoid throttling

Related PR: https://github.com/oomol-lab/epub-translator/pull/112

### Increased Default Token Limit (#112)

The default value of `max_group_tokens` has been increased from 1200 to 2600, allowing larger text segments to be translated together for improved context and translation quality.

Related PR: https://github.com/oomol-lab/epub-translator/pull/112

### XML Element Weight System (#110)

Implemented a weighted priority system for XML element IDs, improving translation quality for complex document structures. This optimization is automatic and requires no user configuration.

Related PR: https://github.com/oomol-lab/epub-translator/pull/110

## üêõ Bug Fixes

### Fixed Nested Inline Elements Crash (#109)

Fixed a `ValueError: Element not found in parent` crash when processing documents with nested inline elements (e.g., `<math>` inside `<span>`). This issue was originally fixed in v0.1.5 and is included in this release.

Related PR: https://github.com/oomol-lab/epub-translator/pull/109

## üîß Improvements

### Translation Module Reorganization (#111)

Refactored core translation logic into a dedicated `translation` module for better code organization and maintainability. Also fixed a typo in the codebase (`firendly` ‚Üí `friendly`).

Related PR: https://github.com/oomol-lab/epub-translator/pull/111

## üì¶ Installation

```bash
pip install epub-translator==0.1.6
```

Or upgrade:

```bash
pip install --upgrade epub-translator
```

## Migration from v0.1.5

Fully backward compatible with v0.1.5. The new `concurrency` parameter defaults to 1, maintaining the same behavior as v0.1.5. No code changes required for existing implementations.

**Changes:**
- New `concurrency` parameter (default: 1) - add this parameter to enable concurrent translation
- `max_group_tokens` default increased from 1200 to 2600 - if you explicitly set this value, no changes needed

**To enable concurrent translation:**

```python
translate(
    source_path="source.epub",
    target_path="translated.epub",
    target_language=language.ENGLISH,
    submit=SubmitKind.APPEND_BLOCK,
    llm=llm,
    concurrency=4,  # Add this line
)
```
